<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ProtectUs</title>
  <link rel="shortcut icon" type="image/png" href="/logo.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <link rel="stylesheet" href="././styles/navbar.css">
</head>

<body class="bg-[#515F84] text-white flex flex-col justify-center items-center h-screen">
  <!-- Back button -->
  <a href="/profile">
    <span
      class="material-symbols-outlined absolute top-0 left-0 mt-4 ml-4 inline-block px-3 py-1 bg-[#515F84] rounded-lg text-[#EAD797]">
      arrow_back_ios
    </span>
  </a>
  <img src="logo.png" alt="" class="w-[300px] h-[300px] justify-center">
  <br>
  <br>
  <br>
  <br>
  <div class="max-w-md mx-auto bg-[#EAD797] rounded-lg p-8 shadow-lg mb-8" style="width: 350px;">
    <!-- Password change form -->
    <h2 class="text-2xl mb-4">Change Password</h2>
    <form action="/resetPasswordProfile" method="post">
      <div class="mb-4 relative">
        <label for="email" class="block mb-2">Email</label>
        <input type="email" id="email" name="email" class="w-full px-4 py-2 rounded-lg bg-[#e7e8ed] text-zinc-400"
          placeholder="email@example.com" value="<%= email %>" required disabled>
      </div>
      <div class="mb-4 relative">
        <label for="password" class="block mb-2">New Password</label>
        <div class="flex items-center">
          <input type="password" id="password" name="password"
            class="w-full px-4 py-2 rounded-lg bg-[#e7e8ed] text-zinc-900" placeholder="Enter new password" required>
          <button id="togglePassword" type="button"
            class="ml-2 bg-transparent border-none text-[#515F84] cursor-pointer">
            <span id="toggleIcon" class="material-symbols-outlined">visibility_off</span>
          </button>
        </div>
      </div>
      <div class="mb-4 relative">
        <label for="confirmPassword" class="block mb-2">Confirm New Password</label>
        <div class="flex items-center">
          <input type="password" id="confirmPassword" name="confirmPassword"
            class="w-full px-4 py-2 rounded-lg bg-[#e7e8ed] text-zinc-900" placeholder="Confirm new password" required>
          <button id="toggleConfirmPassword" type="button"
            class="ml-2 bg-transparent border-none text-[#515F84] cursor-pointer">
            <span id="toggleIconConfirm" class="material-symbols-outlined">visibility_off</span>
          </button>
        </div>
      </div>
      <span id="passwordError" class="error text-red-600" style="display: none;">Passwords do not match.</span>
      <br>
      <br>
      <button type="submit" class="w-full bg-[#515F84] text-white py-2 rounded-lg">Change Password</button>
    </form>
  </div>

  <script>
    const passwordInput = document.getElementById('password');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    const toggleButton = document.getElementById('togglePassword');
    const toggleIcon = document.getElementById('toggleIcon');
    const toggleConfirmButton = document.getElementById('toggleConfirmPassword');
    const toggleIconConfirm = document.getElementById('toggleIconConfirm');
    const passwordError = document.getElementById('passwordError');

    toggleButton.addEventListener('click', () => {
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleIcon.textContent = 'visibility';
      } else {
        passwordInput.type = 'password';
        toggleIcon.textContent = 'visibility_off';
      }
    });

    toggleConfirmButton.addEventListener('click', () => {
      if (confirmPasswordInput.type === 'password') {
        confirmPasswordInput.type = 'text';
        toggleIconConfirm.textContent = 'visibility';
      } else {
        confirmPasswordInput.type = 'password';
        toggleIconConfirm.textContent = 'visibility_off';
      }
    });

    confirmPasswordInput.addEventListener('input', () => {
      if (passwordInput.value !== confirmPasswordInput.value) {
        passwordError.style.display = 'inline';
      } else {
        passwordError.style.display = 'none';
      }
    });
  </script>
</body>

</html>